{
  "Comment": "Create, run, and delete FIS experiment in controlled Account B",
  "StartAt": "CreateExperimentTemplate",
  "States": {
    "CreateExperimentTemplate": {
      "Type": "Task",
      "Next": "FisCrossAccountRun",
      "Parameters": {
        "Actions": {
          "Wait": {
            "ActionId": "aws:fis:wait",
            "Description": "Wait",
            "Parameters": {
              "duration": "PT2M"
            }
          }
        },
        "ClientToken": "clienttoken1",
        "Targets": {},
        "Description": "Trivial wait generated by remote account",
        "RoleArn": "${FisExperimentExecutionRole}",
        "StopConditions": [
          {
            "Source": "none"
          }
        ]
      },
      "Resource": "arn:aws:states:::aws-sdk:fis:createExperimentTemplate",
      "Credentials": {
        "RoleArn": "${AssumableRoleInAccountB}"
      }
    },
    "FisCrossAccountRun": {
      "Type": "Task",
      "Parameters": {
        "ClientToken": "MyData",
        "ExperimentTemplateId": "${FisExperimentToRun}"
      },
      "Resource": "arn:aws:states:::aws-sdk:fis:startExperiment",
      "Credentials": {
        "RoleArn": "${AssumableRoleInAccountB}"
      },
      "End": true
    }
  }
}